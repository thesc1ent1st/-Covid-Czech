SS = 0; % scalescale (flag)
DS = 1; % detailscale (flag)
SD = 2; % scaledetail (flag)
DD = 3; % detaildetail (flag)

disp('preview of our data')
opts = detectImportOptions('CzechRepublicCovidTesting.xlsx');
preview('CzechRepublicCovidTesting.xlsx',opts)

% Matrix S_256 represents the Daily Testing Numbers
S_256 = [20;
    8;
    5;
    1;
    3;
    1;
    5;
    5;
    5;
    0;
    3;
    6;
    0;
    2;
    8;
    2;
    1;
    1;
    0;
    1;
    1;
    2;
    0;
    2;
    0;
    0;
    1;
    3;
    12;
    14;
    23;
    35;
    23;
    7;
    11;
    51;
    78;
    67;
    76;
    111;
    193;
    141;
    265;
    165;
    458;
    537;
    845;
    986;
    1028;
    1319;
    1294;
    1756;
    2259;
    2121;
    1882;
    1801;
    2291;
    3062;
    4107;
    4633;
    5359;
    4224;
    2848;
    5159;
    6661;
    6102;
    6673;
    7398;
    5837;
    4812;
    6435;
    8173;
    8469;
    8180;
    5702;
    4891;
    3250;
    3215;
    6173;
    8476;
    8381;
    8288;
    5605;
    4027;
    6567;
    8341;
    8818;
    7901;
    7129;
    4446;
    3381;
    7754;
    8741;
    7322;
    7396;
    4497;
    3885;
    3881;
    7756;
    9383;
    8052;
    7599;
    4510;
    3788;
    4052;
    7809;
    8755;
    7687;
    6902;
    6790;
    4197;
    3553;
    7458;
    8336;
    7518;
    7290;
    7748;
    5059;
    3849;
    7508;
    7241;
    6846;
    6013;
    6113;
    3548;
    2141;
    5721;
    6478;
    5313;
    5011;
    4173;
    2150;
    2127;
    4684;
    4552;
    4068;
    3739;
    3726;
    1652;
    1121;
    3673;
    4023;
    4036;
    4403;
    3574;
    1699;
    1313;
    3910;
    4567;
    4287;
    4047;
    4533;
    2554;
    2423;
    4485;
    4412;
    4593;
    4665;
    5109;
    1687;
    1524;
    1714;
    4159;
    5406;
    4682;
    5333;
    2321;
    1787;
    4424;
    4802;
    4694;
    4730;
    4727;
    2334;
    1830;
    5785;
    6089;
    6609;
    5557;
    6238;
    3337;
    1784;
    6552;
    7909;
    7509;
    7623;
    8206;
    4707;
    2647;
    7746;
    8414;
    6945;
    7362;
    9206;
    5511;
    2928;
    6483;
    8693;
    7922;
    7412;
    7969;
    5053;
    2979;
    7252;
    7690;
    7655;
    8238;
    9712;
    5118;
    2404;
    7413;
    8763;
    8885;
    9198;
    10826;
    6573;
    3946;
    9371;
    11137;
    11810;
    11541;
    13654;
    7468;
    4537;
    11604;
    16115;
    15506;
    16329;
    19217;
    13246;
    7090;
    17519;
    20461;
    20587;
    23591;
    21580;
    15231;
    10561;
    19410;
    22400;
    22445;
    23163;
    23132;
    15388;
    10468;
    12218;
    18323;
    21092;
    23921;
    23639;
    15201;
    7776;
    17768;
    23045;
    24020;
    25073];
  %  S_256 = [20 8 5 1 3 1 5 5 5 0 3 6 0 2 8 2 1 1 0 1 1 2 0 2 0 0 1 3 12 14 23 35 23 7 11 51 78 67 76 111 193 141 265 165 458 537 845 986 1028 1319 1294 1756 2259 2121 1882 1801 2291 3062 4107 4633 5359 4224 2848 5159 6661 6102 6673 7398 5837 4812 6435 8173 8469 8180 5702 4891 3250 3215 6173 8476 8381 8288 5605 4027 6567 8341 8818 7901 7129 4446 3381 7754 8741 7322 7396 4497 3885 3881 7756 9383 8052 7599 4510 3788 4052 7809 8755 7687 6902 6790 4197 3553 7458 8336 7518 7290 7748 5059 3849 7508 7241 6846 6013 6113 3548 2141 5721 6478 5313 5011 4173 2150 2127 4684 4552 4068 3739 3726 1652 1121 3673 4023 4036 4403 3574 1699 1313 3910 4567 4287 4047 4533 2554 2423 4485 4412 4593 4665 5109 1687 1524 1714 4159 5406 4682 5333 2321 1787 4424 4802 4694 4730 4727 2334 1830 5785 6089 6609 5557 6238 3337 1784 6552 7909 7509 7623 8206 4707 2647 7746 8414 6945 7362 9206 5511 2928 6483 8693 7922 7412 7969 5053 2979 7252 7690 7655 8238 9712 5118 2404 7413 8763 8885 9198 10826 6573 3946 9371 11137 11810 11541 13654 7468 4537 11604 16115 15506 16329 19217 13246 7090 17519 20461 20587 23591 21580 15231 10561 19410 22400 22445 23163 23132 15388 10468 12218 18323 21092 23921 23639 15201 7776 17768 23045 24020 25073]

% in S_256 We have 256 data points indicating daily testing numbers for covid
% We want to report 128 data points which gives us the QAD 'every other day' covid numbers.
% Averaging the neghbouring days yeilds. S_128 we can think of these data points as the coarse trend extracted from our original 256 data points.
S_128 = coarsesplit(S_256, SS);
plot(S_128)
% Now that we have extracted the coarse trend we will extract the detail SD from the S_256 data points.
% The detail D_128 datapoints will be the differences in the daily covid test cases.
% To get the D_128 data we take the consecutive differences in the daily covid cases.
D_128 = coarsesplit(S_256, SD);
plot(D_128)
hold on;

% We continue this to create the rest of the S_n coarse data and the D_n detail data from the S_(n+1) data

S_64 = coarsesplit(S_128, SS);
plot(S_64)
D_64 = coarsesplit(S_128, SD);
plot(D_64)

S_32 = coarsesplit(S_64, SS);
plot(S_32)
hold on;
D_32 = coarsesplit(S_64, SD);

S_16 = coarsesplit(D_32, SS);
plot(D_16)
hold on;
D_16 = coarsesplit(D_32, SD);

S_8 = coarsesplit(D_16, SS);
plot(D_8)
hold on;
D_8 = coarsesplit(D_16, SD);

S_4 = coarsesplit(S_8, SS);
plot(D_4)
hold on;S_256 = [20;
    8;
    5;
    1;
    3;
    1;
    5;
    5;
    5;
    0;
    3;
    6;
    0;
    2;
    8;
    2;
    1;
    1;
    0;
    1;
    1;
    2;
    0;
    2;
    0;
    0;
    1;
    3;
    12;
    14;
    23;
    35;
    23;
    7;
    11;
    51;
    78;
    67;
    76;
    111;
    193;
    141;
    265;
    165;
    458;
    537;
    845;
    986;
    1028;
    1319;
    1294;
    1756;
    2259;
    2121;
    1882;
    1801;
    2291;
    3062;
    4107;
    4633;
    5359;
    4224;
    2848;
    5159;
    6661;
    6102;
    6673;
    7398;
    5837;
    4812;
    6435;
    8173;
    8469;
    8180;
    5702;
    4891;
    3250;
    3215;
    6173;
    8476;
    8381;
    8288;
    5605;
    4027;
    6567;
    8341;
    8818;
    7901;
    7129;
    4446;
    3381;
    7754;
    8741;
    7322;
    7396;
    4497;
    3885;
    3881;
    7756;
    9383;
    8052;
    7599;
    4510;
    3788;
    4052;
    7809;
    8755;
    7687;
    6902;
    6790;
    4197;
    3553;
    7458;
    8336;
    7518;
    7290;
    7748;
    5059;
    3849;
    7508;
    7241;
    6846;
    6013;
    6113;
    3548;
    2141;
    5721;
    6478;
    5313;
    5011;
    4173;
    2150;
    2127;
    4684;
    4552;
    4068;
    3739;
    3726;
    1652;
    1121;
    3673;
    4023;
    4036;
    4403;
    3574;
    1699;
    1313;
    3910;
    4567;
    4287;
    4047;
    4533;
    2554;
    2423;
    4485;
    4412;
    4593;
    4665;
    5109;
    1687;
    1524;
    1714;
    4159;
    5406;
    4682;
    5333;
    2321;
    1787;
    4424;
    4802;
    4694;
    4730;
    4727;
    2334;
    1830;
    5785;
    6089;
    6609;
    5557;
    6238;
    3337;
    1784;
    6552;
    7909;
    7509;
    7623;
    8206;
    4707;
    2647;
    7746;
    8414;
    6945;
    7362;
    9206;
    5511;
    2928;
    6483;
    8693;
    7922;
    7412;
    7969;
    5053;
    2979;
    7252;
    7690;
    7655;
    8238;
    9712;
    5118;
    2404;
    7413;
    8763;
    8885;
    9198;
    10826;
    6573;
    3946;
    9371;
    11137;
    11810;
    11541;
    13654;
    7468;
    4537;
    11604;
    16115;
    15506;
    16329;
    19217;
    13246;
    7090;
    17519;
    20461;
    20587;
    23591;
    21580;
    15231;
    10561;
    19410;
    22400;
    22445;
    23163;
    23132;
    15388;
    10468;
    12218;
    18323;
    21092;
    23921;
    23639;
    15201;
    7776;
    17768;
    23045;
    24020;
    25073];
  %  S_256 = [20 8 5 1 3 1 5 5 5 0 3 6 0 2 8 2 1 1 0 1 1 2 0 2 0 0 1 3 12 14 23 35 23 7 11 51 78 67 76 111 193 141 265 165 458 537 845 986 1028 1319 1294 1756 2259 2121 1882 1801 2291 3062 4107 4633 5359 4224 2848 5159 6661 6102 6673 7398 5837 4812 6435 8173 8469 8180 5702 4891 3250 3215 6173 8476 8381 8288 5605 4027 6567 8341 8818 7901 7129 4446 3381 7754 8741 7322 7396 4497 3885 3881 7756 9383 8052 7599 4510 3788 4052 7809 8755 7687 6902 6790 4197 3553 7458 8336 7518 7290 7748 5059 3849 7508 7241 6846 6013 6113 3548 2141 5721 6478 5313 5011 4173 2150 2127 4684 4552 4068 3739 3726 1652 1121 3673 4023 4036 4403 3574 1699 1313 3910 4567 4287 4047 4533 2554 2423 4485 4412 4593 4665 5109 1687 1524 1714 4159 5406 4682 5333 2321 1787 4424 4802 4694 4730 4727 2334 1830 5785 6089 6609 5557 6238 3337 1784 6552 7909 7509 7623 8206 4707 2647 7746 8414 6945 7362 9206 5511 2928 6483 8693 7922 7412 7969 5053 2979 7252 7690 7655 8238 9712 5118 2404 7413 8763 8885 9198 10826 6573 3946 9371 11137 11810 11541 13654 7468 4537 11604 16115 15506 16329 19217 13246 7090 17519 20461 20587 23591 21580 15231 10561 19410 22400 22445 23163 23132 15388 10468 12218 18323 21092 23921 23639 15201 7776 17768 23045 24020 25073]

% in S_256 We have 256 data points indicating daily testing numbers for covid
% We want to report 128 data points which gives us the QAD 'every other day' covid numbers.
% Averaging the neghbouring days yeilds. S_128 we can think of these data points as the coarse trend extracted from our original 256 data points.
S_128 = coarsesplit(S_256, SS);
plot(S_128)
% Now that we have extracted the coarse trend we will extract the detail SD from the S_256 data points.
% The detail D_128 datapoints will be the differences in the daily covid test cases.
% To get the D_128 data we take the consecutive differences in the daily covid cases.
D_128 = coarsesplit(S_256, SD);
plot(D_128)
hold on;

% We continue this to create the rest of the S_n coarse data and the D_n detail data from the S_(n+1) data

S_64 = coarsesplit(S_128, SS);
plot(S_64)
D_64 = coarsesplit(S_128, SD);
plot(D_64)

S_32 = coarsesplit(S_64, SS);
plot(S_32)
hold on;
D_32 = coarsesplit(S_64, SD);

S_16 = coarsesplit(D_32, SS);
plot(D_16)
hold on;
D_16 = coarsesplit(D_32, SD);

S_8 = coarsesplit(D_16, SS);
plot(D_8)
hold on;
D_8 = coarsesplit(D_16, SD);

S_4 = coarsesplit(S_8, SS);
plot(D_4)
hold on;
D_4 = coarsesplit(S_8, SD);

S_2 = coarsesplit(S_4, SS);
plot(D_2)
hold on;
D_2 = coarsesplit(S_4, SD);

% This overall trend is just the average of the original data points.
S_0 = coarsesplit(S_2, SS);
plot(S_0)
% with the detail
D_0 = coarsesplit(S_2, SD);

recover_S2(1) = S_0 - D_0 / 2
recover_S2(2) = S_0 + D_0 / 2

recover_S4(1) = recover_S2(1) -
0
D_4 = coarsesplit(S_8, SD);

S_2 = coarsesplit(S_4, SS);
plot(D_2)
hold on;
D_2 = coarsesplit(S_4, SD);

% This overall trend is just the average of the original data points.
S_0 = coarsesplit(S_2, SS);
plot(S_0)
% with the detail
D_0 = coarsesplit(S_2, SD);

recover_S2(1) = S_0 - D_0 / 2
recover_S2(2) = S_0 + D_0 / 2

recover_S4(1) = recover_S2(1) -
